{"code":"import { View } from \"./View\";\r\nexport class App extends View {\r\n    constructor(app, state) {\r\n        super(app, state);\r\n        this.app = this;\r\n        this.events = new dhx.EventSystem();\r\n    }\r\n    render(target) {\r\n        if (!target) {\r\n            target = document.body;\r\n        }\r\n        this.root = new dhx.Layout(target, {\r\n            rows: [{\r\n                    id: \"content\",\r\n                }]\r\n        });\r\n        this.init();\r\n    }\r\n    routes() {\r\n        return [];\r\n    }\r\n    setRouter(router) {\r\n        this.router = router;\r\n        const routes = this.routes();\r\n        routes.forEach(r => {\r\n            let cb;\r\n            if (r.redirect) {\r\n                cb = () => router.navigate(r.redirect);\r\n            }\r\n            else {\r\n                cb = url => {\r\n                    const params = {};\r\n                    if (r.params) {\r\n                        Object.assign(params, r.params);\r\n                    }\r\n                    if (url && typeof url === \"object\") {\r\n                        Object.assign(params, url);\r\n                    }\r\n                    this.show(\"\", r.view, params);\r\n                };\r\n            }\r\n            if (r.path === \":not-found:\") {\r\n                router.notFound(cb);\r\n            }\r\n            else {\r\n                router.on(r.path, cb);\r\n            }\r\n        });\r\n        router.resolve();\r\n    }\r\n}\r\n//# sourceMappingURL=App.js.map","map":"{\"version\":3,\"file\":\"App.js\",\"sourceRoot\":\"\",\"sources\":[\"../../sources/App.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAI9B,MAAM,OAAO,GAAI,SAAQ,IAAI;IAI5B,YAAY,GAAS,EAAE,KAAc;QACpC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAElB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,WAAW,EAAE,CAAC;IACrC,CAAC;IACD,MAAM,CAAC,MAAmB;QACzB,IAAI,CAAC,MAAM,EAAE;YACZ,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC;SACvB;QAED,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE;YAClC,IAAI,EAAE,CAAC;oBACN,EAAE,EAAE,SAAS;iBACb,CAAC;SACF,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IACD,MAAM;QACL,OAAO,EAAE,CAAC;IACX,CAAC;IACD,SAAS,CAAC,MAAM;QACf,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAClB,IAAI,EAAE,CAAC;YACP,IAAI,CAAC,CAAC,QAAQ,EAAC;gBACd,EAAE,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;aACvC;iBAAM;gBACN,EAAE,GAAG,GAAG,CAAC,EAAE;oBACV,MAAM,MAAM,GAAG,EAAE,CAAC;oBAElB,IAAI,CAAC,CAAC,MAAM,EAAC;wBACZ,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;qBAChC;oBACD,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAC;wBAClC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;qBAC3B;oBAED,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBAC/B,CAAC,CAAC;aACF;YAED,IAAI,CAAC,CAAC,IAAI,KAAK,aAAa,EAAC;gBAC5B,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;aACnB;iBAAM;gBACN,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;aACtB;QACF,CAAC,CAAC,CAAA;QAEF,MAAM,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;CACD\"}","dts":{"name":"/home/maksim/work/dhtmlx/optimus2/optimus/dist/types/App.d.ts","writeByteOrderMark":false,"text":"import { IApp, IEventSource, IParams } from \"./types\";\r\nimport { View } from \"./View\";\r\nexport declare class App extends View implements IApp {\r\n    events: IEventSource;\r\n    router: any;\r\n    constructor(app: IApp, state: IParams);\r\n    render(target: HTMLElement): void;\r\n    routes(): any[];\r\n    setRouter(router: any): void;\r\n}\r\n"}}
