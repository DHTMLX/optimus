{"code":"var View = /** @class */ (function () {\r\n    function View(app, params) {\r\n        this.app = app;\r\n        this.params = params || {};\r\n        this._views = new Map();\r\n        this._events = [];\r\n    }\r\n    View.prototype.on = function (obj, name, handler) {\r\n        if (arguments.length === 2) {\r\n            handler = name;\r\n            ;\r\n            name = obj;\r\n            obj = this.app;\r\n        }\r\n        var holder = obj;\r\n        var events = holder.events ? holder.events : obj;\r\n        var state = { id: events.on(name, handler), obj: events };\r\n        this._events.push(state);\r\n        return state;\r\n    };\r\n    View.prototype.fire = function (name, data) {\r\n        return this.app.fire(name, data);\r\n    };\r\n    View.prototype._toCell = function (name) {\r\n        if (!name) {\r\n            name = \"content\";\r\n        }\r\n        if (typeof name === \"string\") {\r\n            return this.root.cell(name);\r\n        }\r\n        else {\r\n            return name(this.root);\r\n        }\r\n    };\r\n    View.prototype.show = function (cell, view, params) {\r\n        var target = (typeof cell === \"string\") ? this._toCell(cell) : cell;\r\n        params = params || {};\r\n        var old = this._views.get(target);\r\n        if (old) {\r\n            old.destroy();\r\n        }\r\n        var now = new view(this.app, params);\r\n        this._views.set(target, now);\r\n        var subroot = now.init();\r\n        now.root = subroot;\r\n        if (target) {\r\n            target.attach(subroot);\r\n        }\r\n        now.ready();\r\n    };\r\n    View.prototype.init = function () {\r\n        return null;\r\n    };\r\n    View.prototype.ready = function () {\r\n        /* do nothing */\r\n    };\r\n    View.prototype.destroy = function () {\r\n        this._events.forEach(function (a) {\r\n            a.obj.detach(a.id);\r\n        });\r\n    };\r\n    return View;\r\n}());\r\nexport { View };\r\n//# sourceMappingURL=View.js.map","map":"{\"version\":3,\"file\":\"View.js\",\"sourceRoot\":\"\",\"sources\":[\"../../sources/View.ts\"],\"names\":[],\"mappings\":\"AAcA;IAUC,cAAY,GAAS,EAAE,MAAe;QACrC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;QAE3B,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACnB,CAAC;IAED,iBAAE,GAAF,UAAG,GAAsC,EAAE,IAAY,EAAE,OAAyB;QACjF,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAC;YAC1B,OAAO,GAAI,IAAgC,CAAC;YAAA,CAAC;YAC7C,IAAI,GAAI,GAAqB,CAAC;YAC9B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAA;SACd;QAED,IAAM,MAAM,GAAG,GAAyB,CAAC;QACzC,IAAM,MAAM,GAAiB,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,GAAmB,CAAC;QAEjF,IAAM,KAAK,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,GAAG,EAAC,MAAM,EAAE,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACzB,OAAO,KAAK,CAAC;IACd,CAAC;IAED,mBAAI,GAAJ,UAAK,IAAI,EAAE,IAAI;QACd,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,sBAAO,GAAP,UAAQ,IAA6B;QACpC,IAAI,CAAC,IAAI,EAAE;YACV,IAAI,GAAG,SAAS,CAAC;SACjB;QAED,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YAC7B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;aAAM;YACN,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACvB;IACF,CAAC;IAED,mBAAI,GAAJ,UAAK,IAAiB,EAAE,IAAiB,EAAE,MAAc;QACxD,IAAM,MAAM,GAAG,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACtE,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,GAAG,EAAE;YACR,GAAG,CAAC,OAAO,EAAE,CAAC;SACd;QAED,IAAM,GAAG,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAE7B,IAAM,OAAO,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;QAE1B,GAAW,CAAC,IAAI,GAAG,OAAO,CAAC;QAE5B,IAAI,MAAM,EAAC;YACV,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACvB;QAED,GAAG,CAAC,KAAK,EAAE,CAAC;IACb,CAAC;IAED,mBAAI,GAAJ;QACC,OAAO,IAAI,CAAC;IACb,CAAC;IACD,oBAAK,GAAL;QACC,gBAAgB;IACjB,CAAC;IACD,sBAAO,GAAP;QACC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,CAAC;YACrB,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IACF,WAAC;AAAD,CAAC,AAlFD,IAkFC\"}"}
